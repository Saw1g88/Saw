#!name=DNS
#!desc=脚本实现 DNS 查询, 支持 EDNS Client Subnet (ECS)
#!category=功能模块
#!arguments=type:"A,AAAA",doh:"https://8.8.8.8/dns-query, https://9.9.9.9/dns-query",ttl:"60",timeout:"2",edns:"auto",fallback:1,log:0,policy:0,direct-dns:"https://223.5.5.5/dns-query"
#!arguments-desc=type: 查询类型, 不需要 IPv6, 就填 A\ndoh: 支持多个, 以英文逗号分隔\nttl: 默认 TTL\nedns: EDNS Client Subnet (ECS) 只需要填 IP 若填写 auto. 将从持久化缓存中读取 lastNetworkInfoEvent JSON 的 CN_IP 字段\nfallback: 开启回退到常规 DNS 查询. 1 为开启\nlog: 是否打印日志. 1 为开启\npolicy: 设置请求使用的策略. 0 为关闭\ndirect-dns: 直连域名解析服务器

[Script]
DNS.js = type=dns,script-path=https://raw.githubusercontent.com/Saw1g88/Saw/main/Surge/Script/dns.js,desc=DNS.js,argument="type={{{type}}}&doh={{{doh}}}&ttl={{{ttl}}}&timeout={{{timeout}}}&edns={{{edns}}}&log={{{log}}}&fallback={{{fallback}}}&policy={{{policy}}}"

[Host]
RULE-SET:https://raw.githubusercontent.com/Saw1g88/Saw/refs/heads/main/Rule/Apple.txt = server:{{{direct-dns}}}
RULE-SET:https://raw.githubusercontent.com/Saw1g88/Saw/refs/heads/main/Rule/Direct.txt = server:{{{direct-dns}}}
RULE-SET:https://raw.githubusercontent.com/Saw1g88/Saw/refs/heads/main/Rule/Other/WeChat.txt = server:{{{direct-dns}}}
RULE-SET:https://raw.githubusercontent.com/Saw1g88/Saw/refs/heads/main/Rule/Other/China.txt = server:{{{direct-dns}}}
* = script:DNS.js
