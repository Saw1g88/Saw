#!name=DNS
#!desc=脚本实现 DNS 查询, 支持 EDNS Client Subnet (ECS)
#!arguments=type:"dual",doh:"https://8.8.8.8/dns-query, https://9.9.9.9/dns-query",ttl:"60",timeout:"2",edns:"114.114.114.114",fallback:1,log:0,policy:0,direct-dns:"https://223.5.5.5/dns-query"
#!arguments-desc=type: dual, v4-only, v6-only, prefer-v4, prefer-v6\ndoh: 支持多个, 以英文逗号分隔\nttl: 默认 TTL\nedns: EDNS Client Subnet (ECS) 只需要填 IP 若填写 auto 将从持久化缓存中读取 lastNetworkInfoEvent JSON 的 CN_IP 字段\nfallback: 开启回退到常规 DNS 查询 1 为开启\nlog: 是否打印日志 1 为开启\npolicy: 请求使用的策略 0 为关闭\ndirect-dns: 直连规则 DNS 服务器

[Script]
DNS.js = type=dns,script-path=https://raw.githubusercontent.com/Saw1g88/Saw/main/Surge/Script/dns.js,desc=DNS.js,argument="type={{{type}}}&doh={{{doh}}}&ttl={{{ttl}}}&timeout={{{timeout}}}&edns={{{edns}}}&log={{{log}}}&fallback={{{fallback}}}&policy={{{policy}}}"

[Host]
RULE-SET:https://raw.githubusercontent.com/Saw1g88/Saw/main/Rule/Apple.txt = server:{{{direct-dns}}}
RULE-SET:https://raw.githubusercontent.com/Saw1g88/Saw/main/Rule/Direct.txt = server:{{{direct-dns}}}
RULE-SET:https://raw.githubusercontent.com/Saw1g88/Saw/main/Rule/Other/WeChat.txt = server:{{{direct-dns}}}
RULE-SET:https://raw.githubusercontent.com/Saw1g88/Saw/main/Rule/Other/China.txt = server:{{{direct-dns}}}
* = script:DNS.js
